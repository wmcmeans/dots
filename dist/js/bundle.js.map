{"version":3,"sources":["webpack:///webpack/bootstrap 6f020bbf85a3534fefd0","webpack:///./src/js/index.js","webpack:///./src/js/util.js","webpack:///./src/js/Game.js","webpack:///./src/js/Board.js","webpack:///./src/js/Spot.js","webpack:///./src/js/constants.js","webpack:///./src/js/Line.js"],"names":["document","addEventListener","canvas","start","queryEl","querySelector","selector","queryElAll","querySelectorAll","randomColor","idx","Math","floor","random","getOppositeDelta","delta","Error","fixCanvasBlur","context","getContext","devicePixelRatio","window","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ratio","oldWidth","width","oldHeight","height","style","scale","getCursorPos","event","preventDefault","stopPropagation","x","clientX","offsetLeft","y","clientY","offsetTop","getColorAtReducedOpacity","color","opacity","opacityIdx","length","slice","SpotsGame","xDim","offsetWidth","yDim","offsetHeight","ctx","trackCursor","board","setupScoreBoard","moving","beginMove","cursorPos","points","endMove","updateScore","clearRect","draw","gameTracker","score","movesLeft","animate","render","requestAnimationFrame","trackMoves","e","textContent","console","log","Board","selectedSpots","lines","setup","spot","setActive","line","getHeadSpot","setInactive","getHeadLine","forgeConnection","push","firstSpot","findActiveSpot","addSpotToMove","forEach","clearMove","activeSpot","head","canConnectWith","squareSize","grid","checkForNewConnections","row","tallyAndRemoveSpots","cancelMove","i","j","isMouseOver","pos","replacementSpot","Spot","otherSpot","neighbor","isNeighboring","sameColor","sizeOfSpace","setCanvasPos","isHead","fillStyle","beginPath","arc","canvasPos","cx","cy","radius","PI","fill","pulsing","drawPulse","pulseOpacity","pulseRadius","otherPos","Object","entries","find","increasePulseRadius","pulseIncrease","setInterval","setTimeout","clearInterval","radiusPct","pulse","dx","dy","COLORS","PURPLE","GREEN","BLUE","RED","YELLOW","COLORS_ARRAY","values","DELTAS","top","right","bottom","left","Line","startSpot","strokeStyle","lineWidth","moveTo","endSpot","lineTo","stroke"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;;;AACA;;;;AAEAA,UAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,OAAMC,SAAS,mBAAQ,aAAR,CAAf;AACA,sBAAcA,MAAd,EAAsBC,KAAtB;AACD,EAHD,E;;;;;;;;;;;;;;ACHA;;AAEO,KAAMC,4BAAU,SAAVA,OAAU;AAAA,UAAaJ,SAASK,aAAT,CAAuBC,QAAvB,CAAb;AAAA,EAAhB;AACA,KAAMC,kCAAa,SAAbA,UAAa;AAAA,UAAaP,SAASQ,gBAAT,CAA0BF,QAA1B,CAAb;AAAA,EAAnB;;AAEA,KAAMG,oCAAc,SAAdA,WAAc,GAAM;AAC/B,OAAMC,MAAMC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAZ;AACA,UAAO,wBAAaH,GAAb,CAAP;AACD,EAHM;;AAKA,KAAMI,8CAAmB,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;AACzC,WAAQA,KAAR;AACE,UAAK,KAAL;AACE,cAAO,QAAP;AACF,UAAK,OAAL;AACE,cAAO,MAAP;AACF,UAAK,QAAL;AACE,cAAO,KAAP;AACF,UAAK,MAAL;AACE,cAAO,OAAP;AACF;AACE,aAAM,IAAIC,KAAJ,CAAU,mCAAV,CAAN;AAVJ;AAYD,EAbM;;AAeA,KAAMC,wCAAgB,SAAhBA,aAAgB,CAACf,MAAD,EAAY;AACvC,OAAMgB,UAAUhB,OAAOiB,UAAP,CAAkB,IAAlB,CAAhB;AACA,OAAMC,mBAAmBC,OAAOD,gBAAP,IAA2B,CAApD;AACA,OAAME,oBAAoBJ,QAAQK,4BAAR,IACAL,QAAQM,yBADR,IAEAN,QAAQO,wBAFR,IAGAP,QAAQQ,uBAHR,IAIAR,QAAQS,sBAJR,IAIkC,CAJ5D;;AAMA,OAAMC,QAAQR,mBAAmBE,iBAAjC;;AAEA,OAAIF,qBAAqBE,iBAAzB,EAA4C;AAC1C,SAAMO,WAAW3B,OAAO4B,KAAxB;AACA,SAAMC,YAAY7B,OAAO8B,MAAzB;;AAEA9B,YAAO4B,KAAP,GAAeD,WAAWD,KAA1B;AACA1B,YAAO8B,MAAP,GAAgBD,YAAYH,KAA5B;;AAEA1B,YAAO+B,KAAP,CAAaH,KAAb,GAAwBD,QAAxB;AACA3B,YAAO+B,KAAP,CAAaD,MAAb,GAAyBD,SAAzB;;AAEA;AACA;AACA;AACAb,aAAQgB,KAAR,CAAcN,KAAd,EAAqBA,KAArB;AACD;AACF,EA1BM;;AA4BA,KAAMO,sCAAe,SAAfA,YAAe,CAACjC,MAAD,EAASkC,KAAT,EAAmB;AAC7CA,SAAMC,cAAN;AACAD,SAAME,eAAN;;AAEA,OAAMC,IAAIH,MAAMI,OAAN,GAAgBtC,OAAOuC,UAAjC;AACA,OAAMC,IAAIN,MAAMO,OAAN,GAAgBzC,OAAO0C,SAAjC;AACA,UAAO,EAAEL,IAAF,EAAKG,IAAL,EAAP;AACD,EAPM;;AASA,KAAMG,8DAA2B,SAA3BA,wBAA2B,CAACC,KAAD,EAA0B;AAAA,OAAlBC,OAAkB,uEAAR,GAAQ;;AAChE,OAAMC,aAAaF,MAAMG,MAAN,GAAe,CAAlC;AACA,eAAUH,MAAMI,KAAN,CAAY,CAAZ,EAAeF,UAAf,CAAV,GAAuCD,OAAvC;AACD,EAHM,C;;;;;;;;;;;;;;;AC9DP;;;;AACA;;;;;;KAEqBI,S;AACnB,sBAAYjD,MAAZ,EAAoB;AAAA;;AAClB,UAAKkD,IAAL,GAAYlD,OAAOmD,WAAnB;AACA,UAAKC,IAAL,GAAYpD,OAAOqD,YAAnB;AACA,UAAKC,GAAL,GAAWtD,OAAOiB,UAAP,CAAkB,IAAlB,CAAX;AACA,8BAAcjB,MAAd;;AAEA,UAAKuD,WAAL;;AAEA,UAAKC,KAAL,GAAa,qBAAb;AACA,UAAKC,eAAL;AACD;;;;iCACW;AACV,YAAKC,MAAL,GAAc,IAAd;AACA,YAAKF,KAAL,CAAWG,SAAX,CAAqB,KAAKC,SAA1B;AACD;;;+BACS;AACR,YAAKF,MAAL,GAAc,KAAd;AACA,WAAMG,SAAS,KAAKL,KAAL,CAAWM,OAAX,EAAf;AACA,WAAID,MAAJ,EAAY;AACV,cAAKE,WAAL,CAAiBF,MAAjB;AACD;AACF;;;8BACQ;AACP,YAAKP,GAAL,CAASU,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKd,IAA9B,EAAoC,KAAKE,IAAzC;;AAEA,YAAKI,KAAL,CAAWS,IAAX,CAAgB,KAAKX,GAArB,EAA0B,KAAKM,SAA/B;AACD;;;uCACiB;AAChB,YAAKM,WAAL,GAAmB;AACjBC,gBAAO,mBAAQ,QAAR,CADU;AAEjBC,oBAAW,mBAAQ,aAAR;AAFM,QAAnB;AAIA,YAAKD,KAAL,GAAa,CAAb;AACA,YAAKC,SAAL,GAAiB,EAAjB;AACA,YAAKL,WAAL;AACD;;;6BACO;AAAA;;AACN,WAAMM,UAAU,SAAVA,OAAU,GAAM;AACpB,eAAKC,MAAL;AACAC,+BAAsBF,OAAtB;AACD,QAHD;AAIAA;AACA,YAAKG,UAAL;AACD;;;mCACa;AAAA;;AACZ,YAAKZ,SAAL,GAAiB,EAAEvB,GAAG,CAAL,EAAQG,GAAG,CAAX,EAAjB;;AAEA1C,gBAASC,gBAAT,CAA0B,WAA1B,EAAuC,UAAC0E,CAAD;AAAA,gBACrC,OAAKb,SAAL,GAAiB,wBAAa,OAAKN,GAAL,CAAStD,MAAtB,EAA8ByE,CAA9B,CADoB;AAAA,QAAvC;AAGD;;;kCACY;AAAA;;AACX,YAAKnB,GAAL,CAAStD,MAAT,CAAgBD,gBAAhB,CAAiC,WAAjC,EAA8C;AAAA,gBAAM,OAAK4D,SAAL,EAAN;AAAA,QAA9C;AACAxC,cAAOpB,gBAAP,CAAwB,SAAxB,EAAmC;AAAA,gBAAM,OAAK+D,OAAL,EAAN;AAAA,QAAnC;AACD;;;mCACuB;AAAA,WAAZD,MAAY,uEAAH,CAAG;;AACtB,YAAKM,KAAL,IAAcN,MAAd;AACA,YAAKO,SAAL,IAAkB,CAAlB;AACA,YAAKF,WAAL,CAAiBC,KAAjB,CAAuBO,WAAvB,GAAqC,KAAKP,KAA1C;AACA,YAAKD,WAAL,CAAiBE,SAAjB,CAA2BM,WAA3B,GAAyC,KAAKN,SAA9C;AACAO,eAAQC,GAAR,CAAY,KAAKT,KAAjB;AACD;;;;;;mBA9DkBlB,S;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;;;;;KAEqB4B,K;AACnB,oBAAc;AAAA;;AACZ,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,KAAL,GAAa,EAAb;AACA,UAAKC,KAAL;AACD;;;;mCACaC,I,EAAM;AAClBA,YAAKC,SAAL;AACA,WAAMC,OAAO,mBAASF,IAAT,CAAb;AACA,WAAI,KAAKH,aAAL,CAAmB/B,MAAvB,EAA+B;AAC7B,cAAKqC,WAAL,GAAmBC,WAAnB;AACA,cAAKC,WAAL,GAAmBC,eAAnB,CAAmCN,IAAnC;AACD;AACD,YAAKH,aAAL,CAAmBU,IAAnB,CAAwBP,IAAxB;AACA,YAAKF,KAAL,CAAWS,IAAX,CAAgBL,IAAhB;AACD;;;+BACSvB,S,EAAW;AACnB,YAAKF,MAAL,GAAc,IAAd;AACA,WAAM+B,YAAY,KAAKC,cAAL,CAAoB9B,SAApB,CAAlB;AACA,WAAI6B,SAAJ,EAAe;AACb,cAAKE,aAAL,CAAmBF,SAAnB;AACD,QAFD,MAEO;AACL,cAAK3B,OAAL;AACD;AACF;;;kCACY;AACX,YAAKgB,aAAL,CAAmBc,OAAnB,CAA2B;AAAA,gBAAQX,KAAKI,WAAL,EAAR;AAAA,QAA3B;AACA,YAAKQ,SAAL;AACD;;;4CACsBjC,S,EAAW;AAChC,WAAMkC,aAAa,KAAKJ,cAAL,CAAoB9B,SAApB,CAAnB;AACA,WAAMmC,OAAO,KAAKX,WAAL,EAAb;AACA,WAAIU,cAAcA,eAAeC,IAA7B,IAAqCA,KAAKC,cAAL,CAAoBF,UAApB,CAAzC,EAA0E;AACxE,cAAKH,aAAL,CAAmBG,UAAnB;AACD;AACF;;;iCACW;AACV,YAAKhB,aAAL,GAAqB,EAArB;AACA,YAAKC,KAAL,GAAa,EAAb;AACD;;;0BACIzB,G,EAAKM,S,EAAW;AAAA;;AACnB,YAAKqC,UAAL,GAAkB3C,IAAItD,MAAJ,CAAWmD,WAAX,GAAyB,KAAK+C,IAAL,CAAUnD,MAArD;;AAEA,WAAI,KAAKW,MAAT,EAAiB;AACf,cAAKyC,sBAAL,CAA4BvC,SAA5B;AACD;;AAED,YAAKsC,IAAL,CAAUN,OAAV,CAAkB;AAAA,gBAChBQ,IAAIR,OAAJ,CAAY;AAAA,kBAAQX,KAAKhB,IAAL,CAAUX,GAAV,EAAe,MAAK2C,UAApB,EAAgCrC,SAAhC,CAAR;AAAA,UAAZ,CADgB;AAAA,QAAlB;AAGA,YAAKmB,KAAL,CAAWa,OAAX,CAAmB;AAAA,gBAAQT,KAAKlB,IAAL,CAAUX,GAAV,EAAeM,SAAf,CAAR;AAAA,QAAnB;AACD;;;+BACS;AACR,YAAKF,MAAL,GAAc,KAAd;AACA,WAAI,KAAKoB,aAAL,CAAmB/B,MAAnB,GAA4B,CAAhC,EAAmC;AACjC,gBAAO,KAAKsD,mBAAL,EAAP;AACD;AACD,cAAO,KAAKC,UAAL,EAAP;AACD;;;oCACc1C,S,EAAW;AACxB,YAAK,IAAI2C,IAAI,CAAb,EAAgBA,IAAI,KAAKL,IAAL,CAAUnD,MAA9B,EAAsCwD,GAAtC,EAA2C;AACzC,cAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKN,IAAL,CAAU,CAAV,EAAanD,MAAjC,EAAyCyD,GAAzC,EAA8C;AAC5C,eAAMvB,OAAO,KAAKiB,IAAL,CAAUK,CAAV,EAAaC,CAAb,CAAb;AACA,eAAIvB,KAAKwB,WAAL,CAAiB7C,SAAjB,CAAJ,EAAiC,OAAOqB,IAAP;AAClC;AACF;;AAED,cAAO,IAAP;AACD;;;mCACa;AACZ,cAAO,KAAKF,KAAL,CAAW,KAAKA,KAAL,CAAWhC,MAAX,GAAoB,CAA/B,CAAP;AACD;;;mCACa;AACZ,cAAO,KAAK+B,aAAL,CAAmB,KAAKA,aAAL,CAAmB/B,MAAnB,GAA4B,CAA/C,CAAP;AACD;;;6BACO;AACN,YAAKmD,IAAL,GAAY,EAAZ;;AAEA,YAAK,IAAI1D,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC1B,aAAM4D,MAAM,EAAZ;AACA,cAAK,IAAI/D,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC1B,eAAM4C,OAAO,mBAAS;AACpByB,kBAAK,EAAErE,IAAF,EAAKG,IAAL,EADe;AAEpBI,oBAAO;AAFa,YAAT,CAAb;AAIAwD,eAAIZ,IAAJ,CAASP,IAAT;AACD;AACD,cAAKiB,IAAL,CAAUV,IAAV,CAAeY,GAAf;AACD;AACF;;;2CACqB;AAAA;;AACpB,WAAMvC,SAAS,KAAKiB,aAAL,CAAmB/B,MAAlC;AACA;AACA,YAAK+B,aAAL,CAAmBc,OAAnB,CAA2B,gBAAQ;AAAA,aACzBc,GADyB,GACjBzB,IADiB,CACzByB,GADyB;;AAEjC,aAAMC,kBAAkB,mBAAS,EAAED,QAAF,EAAO9D,OAAO,wBAAd,EAAT,CAAxB;AACA,gBAAKsD,IAAL,CAAUQ,IAAIlE,CAAd,EAAiBkE,IAAIrE,CAArB,IAA0BsE,eAA1B;AACA;AACD,QALD;AAMA,YAAKd,SAAL;AACA,cAAOhC,MAAP;AACD;;;;;;mBArGkBgB,K;;;;;;;;;;;;;;;;;ACJrB;;AACA;;;;KAEqB+B,I;AACnB,uBAA4B;AAAA,SAAdF,GAAc,QAAdA,GAAc;AAAA,SAAT9D,KAAS,QAATA,KAAS;;AAAA;;AAC1B,UAAK8D,GAAL,GAAWA,GAAX;AACA,UAAK9D,KAAL,GAAaA,KAAb;AACA,UAAKyC,WAAL;AACA;AACD;;;;oCACcwB,S,EAAW;AACxB,WAAMC,WAAW,KAAKC,aAAL,CAAmBF,UAAUH,GAA7B,CAAjB;AACA,WAAMM,YAAY,KAAKpE,KAAL,KAAeiE,UAAUjE,KAA3C;;AAEA,cAAOkE,YAAYE,SAAnB;AACD;;;0BACI1D,G,EAAK2D,W,EAAarD,S,EAAW;AAChC,YAAKsD,YAAL,CAAkBD,WAAlB;;AAEA,WAAI,KAAKE,MAAL,IAAe,CAAC,KAAKV,WAAL,CAAiB7C,SAAjB,CAApB,EAAiD;AAC/C;AACA;AACA,cAAKyB,WAAL;AACD;;AAED/B,WAAI8D,SAAJ,GAAgB,KAAKxE,KAArB;AACAU,WAAI+D,SAAJ;AACA/D,WAAIgE,GAAJ,CAAQ,KAAKC,SAAL,CAAeC,EAAvB,EAA2B,KAAKD,SAAL,CAAeE,EAA1C,EAA8C,KAAKF,SAAL,CAAeG,MAA7D,EAAqE,CAArE,EAAwEjH,KAAKkH,EAAL,GAAU,CAAlF;AACArE,WAAIsE,IAAJ;;AAEA,WAAI,KAAKC,OAAT,EAAkB;AAChB,cAAKC,SAAL,CAAexE,GAAf;AACD;AACF;;;+BACSA,G,EAAK;AACbA,WAAI8D,SAAJ,GAAgB,oCAAyB,KAAKxE,KAA9B,EAAqC,KAAKmF,YAA1C,CAAhB;AACAzE,WAAI+D,SAAJ;AACA/D,WAAIgE,GAAJ,CAAQ,KAAKC,SAAL,CAAeC,EAAvB,EAA2B,KAAKD,SAAL,CAAeE,EAA1C,EAA8C,KAAKO,WAAnD,EAAgE,CAAhE,EAAmEvH,KAAKkH,EAAL,GAAU,CAA7E;AACArE,WAAIsE,IAAJ;AACD;;;mCACaK,Q,EAAU;AAAA;;AACtB,cAAOC,OAAOC,OAAP,oBAAuBC,IAAvB,CAA4B,iBAAuB;AAAA;AAAA,aAArBvH,KAAqB;AAAA;AAAA,aAAZwB,CAAY,UAAZA,CAAY;AAAA,aAATG,CAAS,UAATA,CAAS;;AACxD,aAAI,MAAKkE,GAAL,CAASrE,CAAT,GAAaA,CAAb,KAAmB4F,SAAS5F,CAA5B,IAAiC,MAAKqE,GAAL,CAASlE,CAAT,GAAaA,CAAb,KAAmByF,SAASzF,CAAjE,EAAoE;AAClE,kBAAO3B,KAAP;AACD;AACD,gBAAO,KAAP;AACD,QALM,CAAP;AAMD;;;6BACO;AAAA;;AACN,YAAKgH,OAAL,GAAe,IAAf;AACA,YAAKG,WAAL,GAAmB,KAAKT,SAAL,CAAeG,MAAlC;AACA,YAAKK,YAAL,GAAoB,GAApB;;AAEA,WAAMM,sBAAsB,SAAtBA,mBAAsB,GAAM;AAChC,gBAAKL,WAAL,IAAoB,IAApB;AACA,gBAAKD,YAAL,IAAqB,KAArB;AACD,QAHD;;AAKA,WAAMO,gBAAgBC,YAAYF,mBAAZ,EAAiC,CAAjC,CAAtB;AACAG,kBAAW,YAAM;AACfC,uBAAcH,aAAd;AACA,gBAAKT,OAAL,GAAe,KAAf;AACD,QAHD,EAGG,GAHH;AAID;;;iCACW;AACV,YAAKV,MAAL,GAAc,IAAd;AACA,YAAKuB,SAAL,GAAiB,IAAjB;AACA,YAAKC,KAAL;AACD;;;kCACY1B,W,EAAa;AACxB,YAAKM,SAAL,GAAiB;AACfC,aAAI,KAAKd,GAAL,CAASrE,CAAT,GAAa4E,WAAb,GAA4BA,cAAc,CAD/B;AAEfQ,aAAI,KAAKf,GAAL,CAASlE,CAAT,GAAayE,WAAb,GAA4BA,cAAc,CAF/B;AAGfS,iBAAQT,cAAc,KAAKyB;AAHZ,QAAjB;AAKD;;;mCACa;AACZ,YAAKvB,MAAL,GAAc,KAAd;AACA,YAAKuB,SAAL,GAAiB,IAAjB;AACD;;;iCACW9E,S,EAAW;AACrB,WAAMgF,KAAKhF,UAAUvB,CAAV,GAAc,KAAKkF,SAAL,CAAeC,EAAxC;AACA,WAAMqB,KAAKjF,UAAUpB,CAAV,GAAc,KAAK+E,SAAL,CAAeE,EAAxC;AACA,cAAQmB,KAAKA,EAAL,GAAUC,KAAKA,EAAhB,IAAwB,KAAKtB,SAAL,CAAeG,MAAf,GAAwB,KAAKH,SAAL,CAAeG,MAAtE;AACD;;;;;;mBAjFkBd,I;;;;;;;;;;;ACHd,KAAMkC,0BAAS;AACpBC,WAAQ,uBADY;AAEpBC,UAAO,wBAFa;AAGpBC,SAAM,wBAHc;AAIpBC,QAAK,sBAJe;AAKpBC,WAAQ;AALY,EAAf;;AAQA,KAAMC,sCAAelB,OAAOmB,MAAP,CAAcP,MAAd,CAArB;;AAEA,KAAMQ,0BAAS;AACpBC,QAAK,EAAElH,GAAG,CAAL,EAAQG,GAAG,CAAX,EADe;AAEpBgH,UAAO,EAAEnH,GAAG,CAAL,EAAQG,GAAG,CAAX,EAFa;AAGpBiH,WAAQ,EAAEpH,GAAG,CAAL,EAAQG,GAAG,CAAC,CAAZ,EAHY;AAIpBkH,SAAM,EAAErH,GAAG,CAAC,CAAN,EAASG,GAAG,CAAZ;AAJc,EAAf,C;;;;;;;;;;;;;;;;KCVcmH,I;AACnB,iBAAYC,SAAZ,EAAuB;AAAA;;AACrB,UAAKA,SAAL,GAAiBA,SAAjB;AACD;;;;+BACS;AACRjF,eAAQC,GAAR,CAAY,iBAAZ;AACD;;;0BACItB,G,EAAKM,S,EAAW;AACnBN,WAAIuG,WAAJ,GAAkB,KAAKD,SAAL,CAAehH,KAAjC;AACAU,WAAIwG,SAAJ,GAAgB,EAAhB;AACAxG,WAAI+D,SAAJ;AACA/D,WAAIyG,MAAJ,CAAW,KAAKH,SAAL,CAAerC,SAAf,CAAyBC,EAApC,EAAwC,KAAKoC,SAAL,CAAerC,SAAf,CAAyBE,EAAjE;AACA,WAAI,KAAKuC,OAAT,EAAkB;AAChB1G,aAAI2G,MAAJ,CAAW,KAAKD,OAAL,CAAazC,SAAb,CAAuBC,EAAlC,EAAsC,KAAKwC,OAAL,CAAazC,SAAb,CAAuBE,EAA7D;AACD,QAFD,MAEO;AACLnE,aAAI2G,MAAJ,CAAWrG,UAAUvB,CAArB,EAAwBuB,UAAUpB,CAAlC;AACD;AACDc,WAAI4G,MAAJ;AACD;;;qCACeF,O,EAAS;AACvB,YAAKA,OAAL,GAAeA,OAAf;AACD;;;;;;mBArBkBL,I","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6f020bbf85a3534fefd0","import SpotsGame from './Game';\nimport { queryEl } from './util';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const canvas = queryEl('#spots-game');\n  new SpotsGame(canvas).start();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","import { COLORS_ARRAY, DELTAS } from './constants';\n\nexport const queryEl = selector => (document.querySelector(selector));\nexport const queryElAll = selector => (document.querySelectorAll(selector));\n\nexport const randomColor = () => {\n  const idx = Math.floor(Math.random() * 5);\n  return COLORS_ARRAY[idx];\n};\n\nexport const getOppositeDelta = (delta) => {\n  switch (delta) {\n    case 'top':\n      return 'bottom';\n    case 'right':\n      return 'left';\n    case 'bottom':\n      return 'top';\n    case 'left':\n      return 'right';\n    default:\n      throw new Error('delta not found in list of deltas');\n  }\n};\n\nexport const fixCanvasBlur = (canvas) => {\n  const context = canvas.getContext('2d');\n  const devicePixelRatio = window.devicePixelRatio || 1;\n  const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1;\n\n  const ratio = devicePixelRatio / backingStoreRatio;\n\n  if (devicePixelRatio !== backingStoreRatio) {\n    const oldWidth = canvas.width;\n    const oldHeight = canvas.height;\n\n    canvas.width = oldWidth * ratio;\n    canvas.height = oldHeight * ratio;\n\n    canvas.style.width = `${oldWidth}px`;\n    canvas.style.height = `${oldHeight}px`;\n\n    // now scale the context to counter\n    // the fact that we've manually scaled\n    // our canvas element\n    context.scale(ratio, ratio);\n  }\n};\n\nexport const getCursorPos = (canvas, event) => {\n  event.preventDefault();\n  event.stopPropagation();\n\n  const x = event.clientX - canvas.offsetLeft;\n  const y = event.clientY - canvas.offsetTop;\n  return { x, y };\n};\n\nexport const getColorAtReducedOpacity = (color, opacity = 0.5) => {\n  const opacityIdx = color.length - 2;\n  return `${color.slice(0, opacityIdx)}${opacity})`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util.js","import Board from './Board';\nimport { fixCanvasBlur, getCursorPos, queryEl } from './util';\n\nexport default class SpotsGame {\n  constructor(canvas) {\n    this.xDim = canvas.offsetWidth;\n    this.yDim = canvas.offsetHeight;\n    this.ctx = canvas.getContext('2d');\n    fixCanvasBlur(canvas);\n\n    this.trackCursor();\n\n    this.board = new Board();\n    this.setupScoreBoard();\n  }\n  beginMove() {\n    this.moving = true;\n    this.board.beginMove(this.cursorPos);\n  }\n  endMove() {\n    this.moving = false;\n    const points = this.board.endMove();\n    if (points) {\n      this.updateScore(points);\n    }\n  }\n  render() {\n    this.ctx.clearRect(0, 0, this.xDim, this.yDim);\n\n    this.board.draw(this.ctx, this.cursorPos);\n  }\n  setupScoreBoard() {\n    this.gameTracker = {\n      score: queryEl('#score'),\n      movesLeft: queryEl('#moves-left'),\n    };\n    this.score = 0;\n    this.movesLeft = 31;\n    this.updateScore();\n  }\n  start() {\n    const animate = () => {\n      this.render();\n      requestAnimationFrame(animate);\n    };\n    animate();\n    this.trackMoves();\n  }\n  trackCursor() {\n    this.cursorPos = { x: 0, y: 0 };\n\n    document.addEventListener('mousemove', (e) => (\n      this.cursorPos = getCursorPos(this.ctx.canvas, e)\n    ));\n  }\n  trackMoves() {\n    this.ctx.canvas.addEventListener('mousedown', () => this.beginMove());\n    window.addEventListener('mouseup', () => this.endMove());\n  }\n  updateScore(points = 0) {\n    this.score += points;\n    this.movesLeft -= 1;\n    this.gameTracker.score.textContent = this.score;\n    this.gameTracker.movesLeft.textContent = this.movesLeft;\n    console.log(this.score);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Game.js","import Spot from './Spot';\nimport Line from './Line';\nimport { randomColor } from './util';\n\nexport default class Board {\n  constructor() {\n    this.selectedSpots = [];\n    this.lines = [];\n    this.setup();\n  }\n  addSpotToMove(spot) {\n    spot.setActive();\n    const line = new Line(spot);\n    if (this.selectedSpots.length) {\n      this.getHeadSpot().setInactive();\n      this.getHeadLine().forgeConnection(spot);\n    }\n    this.selectedSpots.push(spot);\n    this.lines.push(line);\n  }\n  beginMove(cursorPos) {\n    this.moving = true;\n    const firstSpot = this.findActiveSpot(cursorPos);\n    if (firstSpot) {\n      this.addSpotToMove(firstSpot);\n    } else {\n      this.endMove();\n    }\n  }\n  cancelMove() {\n    this.selectedSpots.forEach(spot => spot.setInactive());\n    this.clearMove();\n  }\n  checkForNewConnections(cursorPos) {\n    const activeSpot = this.findActiveSpot(cursorPos);\n    const head = this.getHeadSpot();\n    if (activeSpot && activeSpot !== head && head.canConnectWith(activeSpot)) {\n      this.addSpotToMove(activeSpot);\n    }\n  }\n  clearMove() {\n    this.selectedSpots = [];\n    this.lines = [];\n  }\n  draw(ctx, cursorPos) {\n    this.squareSize = ctx.canvas.offsetWidth / this.grid.length;\n\n    if (this.moving) {\n      this.checkForNewConnections(cursorPos);\n    }\n\n    this.grid.forEach(row => (\n      row.forEach(spot => spot.draw(ctx, this.squareSize, cursorPos))\n    ));\n    this.lines.forEach(line => line.draw(ctx, cursorPos));\n  }\n  endMove() {\n    this.moving = false;\n    if (this.selectedSpots.length > 1) {\n      return this.tallyAndRemoveSpots();\n    }\n    return this.cancelMove();\n  }\n  findActiveSpot(cursorPos) {\n    for (let i = 0; i < this.grid.length; i++) {\n      for (let j = 0; j < this.grid[0].length; j++) {\n        const spot = this.grid[i][j];\n        if (spot.isMouseOver(cursorPos)) return spot;\n      }\n    }\n\n    return null;\n  }\n  getHeadLine() {\n    return this.lines[this.lines.length - 1];\n  }\n  getHeadSpot() {\n    return this.selectedSpots[this.selectedSpots.length - 1];\n  }\n  setup() {\n    this.grid = [];\n\n    for (let y = 0; y < 6; y++) {\n      const row = [];\n      for (let x = 0; x < 6; x++) {\n        const spot = new Spot({\n          pos: { x, y },\n          color: randomColor(),\n        });\n        row.push(spot);\n      }\n      this.grid.push(row);\n    }\n  }\n  tallyAndRemoveSpots() {\n    const points = this.selectedSpots.length;\n    // TODO: Instead of replacing spots in place, they should fall down in their columns\n    this.selectedSpots.forEach(spot => {\n      const { pos } = spot;\n      const replacementSpot = new Spot({ pos, color: randomColor() });\n      this.grid[pos.y][pos.x] = replacementSpot;\n      // this.grid[pos.x].push(replacementSpot);\n    });\n    this.clearMove();\n    return points;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Board.js","import { DELTAS } from './constants';\nimport { getColorAtReducedOpacity } from './util';\n\nexport default class Spot {\n  constructor({ pos, color }) {\n    this.pos = pos;\n    this.color = color;\n    this.setInactive();\n    // this.radiusPct = 0.22;\n  }\n  canConnectWith(otherSpot) {\n    const neighbor = this.isNeighboring(otherSpot.pos);\n    const sameColor = this.color === otherSpot.color;\n\n    return neighbor && sameColor;\n  }\n  draw(ctx, sizeOfSpace, cursorPos) {\n    this.setCanvasPos(sizeOfSpace);\n\n    if (this.isHead && !this.isMouseOver(cursorPos)) {\n      // console.log(`mouse over [${this.pos.x}, ${this.pos.y}] (${this.color})`);\n      // console.log(`mouse exited [${this.pos.x}, ${this.pos.y}] (${this.color})`);\n      this.setInactive();\n    }\n\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.canvasPos.cx, this.canvasPos.cy, this.canvasPos.radius, 0, Math.PI * 2);\n    ctx.fill();\n\n    if (this.pulsing) {\n      this.drawPulse(ctx);\n    }\n  }\n  drawPulse(ctx) {\n    ctx.fillStyle = getColorAtReducedOpacity(this.color, this.pulseOpacity);\n    ctx.beginPath();\n    ctx.arc(this.canvasPos.cx, this.canvasPos.cy, this.pulseRadius, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  isNeighboring(otherPos) {\n    return Object.entries(DELTAS).find(([delta, { x, y }]) => {\n      if (this.pos.x + x === otherPos.x && this.pos.y + y === otherPos.y) {\n        return delta;\n      }\n      return false;\n    });\n  }\n  pulse() {\n    this.pulsing = true;\n    this.pulseRadius = this.canvasPos.radius;\n    this.pulseOpacity = 0.5;\n\n    const increasePulseRadius = () => {\n      this.pulseRadius += 0.26;\n      this.pulseOpacity -= 0.004;\n    };\n\n    const pulseIncrease = setInterval(increasePulseRadius, 3);\n    setTimeout(() => {\n      clearInterval(pulseIncrease);\n      this.pulsing = false;\n    }, 350);\n  }\n  setActive() {\n    this.isHead = true;\n    this.radiusPct = 0.25;\n    this.pulse();\n  }\n  setCanvasPos(sizeOfSpace) {\n    this.canvasPos = {\n      cx: this.pos.x * sizeOfSpace + (sizeOfSpace / 2),\n      cy: this.pos.y * sizeOfSpace + (sizeOfSpace / 2),\n      radius: sizeOfSpace * this.radiusPct,\n    };\n  }\n  setInactive() {\n    this.isHead = false;\n    this.radiusPct = 0.22;\n  }\n  isMouseOver(cursorPos) {\n    const dx = cursorPos.x - this.canvasPos.cx;\n    const dy = cursorPos.y - this.canvasPos.cy;\n    return (dx * dx + dy * dy) <= (this.canvasPos.radius * this.canvasPos.radius);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Spot.js","export const COLORS = {\n  PURPLE: 'rgba(157, 90, 184, 1)',\n  GREEN: 'rgba(138, 237, 145, 1)',\n  BLUE: 'rgba(138, 189, 255, 1)',\n  RED: 'rgba(241, 92, 59, 1)',\n  YELLOW: 'rgba(231, 221, 0, 1)',\n};\n\nexport const COLORS_ARRAY = Object.values(COLORS);\n\nexport const DELTAS = {\n  top: { x: 0, y: 1 },\n  right: { x: 1, y: 0 },\n  bottom: { x: 0, y: -1 },\n  left: { x: -1, y: 0 },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/constants.js","export default class Line {\n  constructor(startSpot) {\n    this.startSpot = startSpot;\n  }\n  destroy() {\n    console.log('destroy mee!!!!');\n  }\n  draw(ctx, cursorPos) {\n    ctx.strokeStyle = this.startSpot.color;\n    ctx.lineWidth = 12;\n    ctx.beginPath();\n    ctx.moveTo(this.startSpot.canvasPos.cx, this.startSpot.canvasPos.cy);\n    if (this.endSpot) {\n      ctx.lineTo(this.endSpot.canvasPos.cx, this.endSpot.canvasPos.cy);\n    } else {\n      ctx.lineTo(cursorPos.x, cursorPos.y);\n    }\n    ctx.stroke();\n  }\n  forgeConnection(endSpot) {\n    this.endSpot = endSpot;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Line.js"],"sourceRoot":""}