{"version":3,"sources":["webpack:///webpack/bootstrap 0278119b2892f70d49ae","webpack:///./src/js/index.js","webpack:///./src/js/Game.js","webpack:///./src/js/Board.js","webpack:///./src/js/Spot.js","webpack:///./src/js/constants.js","webpack:///./src/js/util.js","webpack:///./src/js/Line.js"],"names":["document","addEventListener","canvas","start","SpotsGame","alreadyPlayed","xDim","offsetWidth","yDim","offsetHeight","ctx","getContext","listenerRemoves","trackCursor","board","setupScoreBoard","setupGameOverText","squared","body","style","backgroundColor","moveColor","borderColor","moving","beginMove","cursorPos","clearRect","endGameDom","highScoreTextNodes","forEach","span","textContent","highScore","thisScoreTextNode","score","newHighScore","gameOverText","classList","add","remove","canvasContainer","over","updateHighScoreIfBeaten","displayGameOverText","points","endMove","updateScore","movesLeft","end","timeDelta","addBorderAndBG","draw","func","e","preventDefault","reset","newHighScoreText","sameHighScoreText","gameTracker","animate","time","lastTime","render","window","requestAnimationFrame","clearCanvas","trackMoves","x","y","mouseMoveListen","touchMoveListen","push","removeEventListener","mouseDownListen","touchStartListen","endMoveListen","parseInt","localStorage","getItem","Number","isNaN","setItem","Board","selectedSpots","lines","undefined","setup","color","grid","row","spot","find","selected","setActive","line","length","getTailSpot","setInactive","getTailLine","forgeConnection","firstSpot","findActiveSpot","addSpotToMove","clearMove","activeSpot","tail","canConnectWith","connectionAreadyExists","startSpot","endSpot","spotBeforeTail","getSpotBeforeTail","removeLastConnection","checkForSquares","seenSpots","Set","posAsString","pos","has","squareSize","checkForNewConnections","tallyAndRemoveSpots","cancelMove","i","j","isMouseOver","pop","lastLine","destroyConnection","addAllSpotsOfColorToMove","column","animateFromPreviousHeight","replacementPos","replacementSpot","Spot","sizeOfSpace","downwardAnimation","previousCanvasCY","previousY","currentCanvasCY","differenceInCanvasCY","canvasPos","cy","otherSpot","neighbor","isNeighboring","sameColor","setCanvasPos","setCanvasPosForAnimationDown","isHead","fillStyle","beginPath","arc","cx","radius","Math","PI","fill","pulsing","increasePulse","drawPulse","pulseOpacity","pulseRadius","otherPos","Object","entries","delta","radiusPct","pulse","dx","dy","COLORS","PURPLE","GREEN","BLUE","RED","YELLOW","COLORS_ARRAY","values","DELTAS","top","right","bottom","left","HIGH_SCORE","queryEl","querySelector","selector","queryElAll","querySelectorAll","randomColor","idx","floor","random","getOppositeDelta","Error","fixCanvasBlur","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ratio","oldWidth","width","oldHeight","height","innerWidth","shrinkToFitScreenRatio","scale","getCursorPos","event","stopPropagation","clientX","offsetLeft","clientY","offsetTop","getTouchPos","touch","touches","changedTouches","getColorAtReducedOpacity","opacity","opacityIdx","slice","Line","strokeStyle","lineWidth","moveTo","lineTo","stroke"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0278119b2892f70d49ae","import SpotsGame from './Game';\nimport { queryEl } from './util';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const canvas = queryEl('#spots-game');\n  new SpotsGame(canvas).start();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","import Board from './Board';\nimport { HIGH_SCORE } from './constants';\nimport {\n  fixCanvasBlur,\n  getCursorPos,\n  getTouchPos,\n  getColorAtReducedOpacity,\n  queryEl,\n  queryElAll,\n} from './util';\n\nexport default class SpotsGame {\n  constructor(canvas, alreadyPlayed) {\n    this.xDim = canvas.offsetWidth;\n    this.yDim = canvas.offsetHeight;\n    this.ctx = canvas.getContext('2d');\n    if (!alreadyPlayed) {\n      fixCanvasBlur(canvas);\n    }\n\n    this.listenerRemoves = [];\n    this.trackCursor();\n\n    this.board = new Board();\n    this.setupScoreBoard();\n    this.setupGameOverText();\n  }\n  addBorderAndBG() {\n    if (this.board.squared) {\n      document.body.style.backgroundColor = getColorAtReducedOpacity(this.board.moveColor, 0.25);\n      document.body.style.borderColor = getColorAtReducedOpacity(this.board.moveColor);\n    } else {\n      document.body.style.backgroundColor = '';\n      document.body.style.borderColor = 'transparent';\n    }\n  }\n  beginMove() {\n    this.moving = true;\n    this.board.beginMove(this.cursorPos);\n  }\n  clearCanvas() {\n    this.ctx.clearRect(0, 0, this.xDim, this.yDim);\n  }\n  displayGameOverText() {\n    this.endGameDom.highScoreTextNodes.forEach(span => span.textContent = this.highScore);\n    this.endGameDom.thisScoreTextNode.textContent = this.score;\n    if (this.newHighScore) {\n      this.endGameDom.gameOverText.classList.add('new-high-score');\n    } else {\n      this.endGameDom.gameOverText.classList.remove('new-high-score');\n    }\n    this.endGameDom.canvasContainer.classList.add('game-over');\n  }\n  end() {\n    this.over = true;\n    this.updateHighScoreIfBeaten();\n    this.displayGameOverText();\n  }\n  endMove() {\n    this.moving = false;\n    const points = this.board.endMove();\n    if (points) {\n      this.updateScore(points);\n    }\n    if (this.movesLeft === 0) {\n      this.end();\n    }\n  }\n  render(timeDelta) {\n    this.ctx.clearRect(0, 0, this.xDim, this.yDim);\n    this.addBorderAndBG();\n\n    this.board.draw(this.ctx, this.cursorPos, timeDelta);\n  }\n  reset() {\n    this.endGameDom.canvasContainer.classList.remove('game-over');\n    this.over = false;\n    this.score = 0;\n    this.listenerRemoves.forEach(func => func());\n    this.trackCursor()\n    this.board = new Board();\n    this.setupScoreBoard();\n    this.start();\n  }\n  setupGameOverText() {\n    queryEl('#new-game-btn').addEventListener('click', (e) => {\n      e.preventDefault();\n      this.reset();\n    });\n\n    this.endGameDom = {\n      canvasContainer: queryEl('#canvas-container'),\n      gameOverText: queryEl('#game-over-text'),\n      newHighScoreText: queryEl('#new-high-score'),\n      sameHighScoreText: queryEl('#same-high-score'),\n      highScoreTextNodes: queryElAll('.high-score-text'),\n      thisScoreTextNode: queryEl('#this-score-text'),\n    };\n  }\n  setupScoreBoard() {\n    this.gameTracker = {\n      score: queryEl('#score'),\n      movesLeft: queryEl('#moves-left'),\n    };\n    this.score = 0;\n    this.movesLeft = 3;\n    // this.movesLeft = 31;\n    this.updateScore();\n  }\n  start() {\n    const animate = (time) => {\n      const timeDelta = time - this.lastTime;\n      this.lastTime = time;\n\n      this.render(timeDelta);\n      if (!this.over) {\n        window.requestAnimationFrame(animate);\n      } else {\n        this.clearCanvas();\n      }\n    };\n    animate(0);\n    this.trackMoves();\n  }\n  trackCursor() {\n    this.cursorPos = { x: 0, y: 0 };\n\n    const mouseMoveListen = (e) => (this.cursorPos = getCursorPos(this.ctx.canvas, e));\n    const touchMoveListen = (e) => (this.cursorPos = getTouchPos(this.ctx.canvas, e));\n\n    document.addEventListener('mousemove', mouseMoveListen);\n    document.addEventListener('touchmove', touchMoveListen);\n\n    this.listenerRemoves.push(() => document.removeEventListener('mousemove', mouseMoveListen));\n    this.listenerRemoves.push(() => document.removeEventListener('touchmove', touchMoveListen));\n  }\n  trackMoves() {\n    const mouseDownListen = () => this.beginMove();\n    const touchStartListen = (e) => {\n      this.cursorPos = getTouchPos(this.ctx.canvas, e);\n      this.beginMove();\n    };\n\n    this.ctx.canvas.addEventListener('mousedown', mouseDownListen);\n    this.ctx.canvas.addEventListener('touchstart', touchStartListen);\n\n    this.listenerRemoves.push(() => document.removeEventListener('mousedown', mouseDownListen));\n    this.listenerRemoves.push(() => document.removeEventListener('touchstart', touchStartListen));\n\n    const endMoveListen = () => this.endMove();\n    window.addEventListener('mouseup', () => this.endMove());\n    window.addEventListener('touchend', () => this.endMove());\n\n    this.listenerRemoves.push(() => document.removeEventListener('mouseup', endMoveListen));\n    this.listenerRemoves.push(() => document.removeEventListener('touchend', endMoveListen));\n  }\n  updateHighScoreIfBeaten() {\n    this.highScore = parseInt(localStorage.getItem(HIGH_SCORE), 10);\n    this.newHighScore = false;\n    if (this.score > this.highScore || Number.isNaN(this.highScore)) {\n      this.newHighScore = true;\n      this.highScore = this.score;\n      localStorage.setItem(HIGH_SCORE, this.score);\n    }\n  }\n  updateScore(points = 0) {\n    this.score += points;\n    this.movesLeft -= 1;\n    this.gameTracker.score.textContent = this.score;\n    this.gameTracker.movesLeft.textContent = this.movesLeft;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Game.js","import Spot from './Spot';\nimport Line from './Line';\nimport { randomColor } from './util';\n\nexport default class Board {\n  constructor() {\n    this.selectedSpots = [];\n    this.lines = [];\n    this.moveColor = undefined;\n    this.setup();\n  }\n  addAllSpotsOfColorToMove() {\n    const moveColor = this.selectedSpots[0] && this.selectedSpots[0].color;\n    this.grid.forEach(row => {\n      row.forEach(spot => {\n        if (spot.color === moveColor && !this.selectedSpots.find(selected => selected === spot)) {\n          this.selectedSpots.push(spot);\n        }\n      });\n    });\n  }\n  addSpotToMove(spot) {\n    spot.setActive();\n    const line = new Line(spot);\n    if (this.selectedSpots.length) {\n      this.getTailSpot().setInactive();\n      this.getTailLine().forgeConnection(spot);\n    }\n    this.selectedSpots.push(spot);\n    this.lines.push(line);\n  }\n  beginMove(cursorPos) {\n    this.moving = true;\n    const firstSpot = this.findActiveSpot(cursorPos);\n    if (firstSpot) {\n      this.addSpotToMove(firstSpot);\n    } else {\n      this.endMove();\n    }\n  }\n  cancelMove() {\n    this.selectedSpots.forEach(spot => spot.setInactive());\n    this.clearMove();\n  }\n  checkForNewConnections(cursorPos) {\n    const activeSpot = this.findActiveSpot(cursorPos);\n    const tail = this.getTailSpot();\n    if (activeSpot && activeSpot !== tail && tail.canConnectWith(activeSpot)) {\n      const connectionAreadyExists = this.lines.find(({ startSpot, endSpot }) => (\n        (startSpot === tail && endSpot === activeSpot) ||\n        (startSpot === activeSpot && endSpot === tail)\n      ));\n\n      const spotBeforeTail = this.getSpotBeforeTail();\n      if (spotBeforeTail && spotBeforeTail === activeSpot) {\n        this.removeLastConnection();\n        this.checkForSquares();\n      } else if (!connectionAreadyExists) {\n        this.addSpotToMove(activeSpot);\n        this.checkForSquares();\n      }\n    }\n  }\n  checkForSquares() {\n    const seenSpots = new Set();\n    let squared = false;\n    this.lines.forEach(({ startSpot }) => {\n      const posAsString = `${startSpot.pos.x}-${startSpot.pos.y}`;\n      if (seenSpots.has(posAsString)) {\n        squared = true;\n      }\n      seenSpots.add(posAsString);\n    });\n\n    this.moveColor = this.selectedSpots[0] && this.selectedSpots[0].color;\n    this.grid.forEach(row => {\n      row.forEach(spot => {\n        if (spot.color === this.moveColor && squared) {\n          spot.setActive();\n        } else if (!this.selectedSpots.find(selected => selected === spot)) {\n          spot.setInactive();\n        }\n      });\n    });\n\n    this.squared = squared;\n  }\n  clearMove() {\n    this.selectedSpots = [];\n    this.lines = [];\n  }\n  draw(ctx, cursorPos, timeDelta) {\n    this.squareSize = ctx.canvas.offsetWidth / this.grid.length;\n\n    if (this.moving) {\n      this.checkForNewConnections(cursorPos);\n    }\n\n    this.grid.forEach(row => (\n      row.forEach(spot => spot.draw(ctx, this.squareSize, cursorPos, timeDelta))\n    ));\n    this.lines.forEach(line => line.draw(ctx, cursorPos));\n  }\n  endMove() {\n    this.moving = false;\n    if (this.selectedSpots.length > 1) {\n      return this.tallyAndRemoveSpots();\n    }\n    return this.cancelMove();\n  }\n  findActiveSpot(cursorPos) {\n    for (let i = 0; i < this.grid.length; i++) {\n      for (let j = 0; j < this.grid[0].length; j++) {\n        const spot = this.grid[i][j];\n        if (spot.isMouseOver(cursorPos)) return spot;\n      }\n    }\n\n    return null;\n  }\n  getTailLine() {\n    return this.lines[this.lines.length - 1];\n  }\n  getTailSpot() {\n    return this.selectedSpots[this.selectedSpots.length - 1];\n  }\n  getSpotBeforeTail() {\n    if (this.selectedSpots.length < 2) return null;\n    return this.selectedSpots[this.selectedSpots.length - 2];\n  }\n  removeLastConnection() {\n    this.selectedSpots.pop();\n    this.lines.pop();\n    const lastLine = this.lines[this.lines.length - 1];\n    if (lastLine.endSpot) {\n      lastLine.destroyConnection();\n    }\n  }\n  setup() {\n    this.grid = [];\n\n    for (let y = 0; y < 6; y++) {\n      const row = [];\n      for (let x = 0; x < 6; x++) {\n        const spot = new Spot({\n          pos: { x, y },\n          color: randomColor(),\n        });\n        row.push(spot);\n      }\n      this.grid.push(row);\n    }\n  }\n  tallyAndRemoveSpots() {\n    if (this.squared) {\n      this.addAllSpotsOfColorToMove();\n    }\n    this.squared = false;\n\n    const points = this.selectedSpots.length;\n    this.selectedSpots.forEach(spot => {\n      const { x: column, y: row } = spot.pos;\n      this.grid[row][column] = null;\n      for (let y = row; y > 0; y--) {\n        // this swaps out the positions of the spots so that it shifts them \"down\" (higher index)\n        this.grid[y][column] = this.grid[y - 1][column];\n        this.grid[y - 1][column] = null;\n        this.grid[y][column].pos.y = y;\n\n        if (this.grid[y][column]) {\n          this.grid[y][column].animateFromPreviousHeight(y - 1);\n        }\n      }\n      const replacementPos = { x: column, y: 0 };\n      const replacementSpot = new Spot({ pos: replacementPos, color: randomColor() });\n      this.grid[0][column] = replacementSpot;\n      replacementSpot.animateFromPreviousHeight(-1);\n    });\n    this.clearMove();\n    return points;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Board.js","import { DELTAS } from './constants';\nimport { getColorAtReducedOpacity } from './util';\n\nexport default class Spot {\n  constructor({ pos, color }) {\n    this.pos = pos;\n    this.color = color;\n    this.setInactive();\n  }\n  setCanvasPosForAnimationDown(sizeOfSpace, timeDelta) {\n    this.downwardAnimation += (timeDelta * 0.004);\n\n    const previousCanvasCY = this.previousY * sizeOfSpace + (sizeOfSpace / 2);\n    const currentCanvasCY = this.pos.y * sizeOfSpace + (sizeOfSpace / 2);\n    const differenceInCanvasCY = currentCanvasCY - previousCanvasCY;\n\n    if (this.downwardAnimation < 1) {\n      this.canvasPos.cy = previousCanvasCY + (differenceInCanvasCY * this.downwardAnimation);\n    } else {\n      this.downwardAnimation = undefined;\n      this.previousY = undefined;\n    }\n  }\n  canConnectWith(otherSpot) {\n    const neighbor = this.isNeighboring(otherSpot.pos);\n    const sameColor = this.color === otherSpot.color;\n\n    return neighbor && sameColor;\n  }\n  draw(ctx, sizeOfSpace, cursorPos, timeDelta) {\n    this.setCanvasPos(sizeOfSpace);\n    if (typeof this.downwardAnimation !== 'undefined') {\n      this.setCanvasPosForAnimationDown(sizeOfSpace, timeDelta);\n    }\n\n    if (this.isHead && !this.isMouseOver(cursorPos)) {\n      this.setInactive();\n    }\n\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.canvasPos.cx, this.canvasPos.cy, this.canvasPos.radius, 0, Math.PI * 2);\n    ctx.fill();\n\n    if (this.pulsing) {\n      this.increasePulse(timeDelta);\n      this.drawPulse(ctx, timeDelta);\n    }\n  }\n  drawPulse(ctx) {\n    ctx.fillStyle = getColorAtReducedOpacity(this.color, this.pulseOpacity);\n    ctx.beginPath();\n    ctx.arc(this.canvasPos.cx, this.canvasPos.cy, this.pulseRadius, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  increasePulse(timeDelta) {\n    this.pulseRadius += (0.08 * timeDelta);\n    this.pulseOpacity -= (0.001 * timeDelta);\n    if (this.pulseOpacity < 0) {\n      this.pulsing = false;\n    }\n  }\n  isNeighboring(otherPos) {\n    return Object.entries(DELTAS).find(([delta, { x, y }]) => {\n      if (this.pos.x + x === otherPos.x && this.pos.y + y === otherPos.y) {\n        return delta;\n      }\n      return false;\n    });\n  }\n  pulse() {\n    this.pulsing = true;\n    this.pulseRadius = this.canvasPos.radius;\n    this.pulseOpacity = 0.5;\n  }\n  setActive() {\n    this.isHead = true;\n    this.radiusPct = 0.25;\n    this.pulse();\n  }\n  setCanvasPos(sizeOfSpace) {\n    this.canvasPos = {\n      cx: this.pos.x * sizeOfSpace + (sizeOfSpace / 2),\n      cy: this.pos.y * sizeOfSpace + (sizeOfSpace / 2),\n      radius: sizeOfSpace * this.radiusPct,\n    };\n  }\n  setInactive() {\n    this.isHead = false;\n    this.radiusPct = 0.22;\n  }\n  animateFromPreviousHeight(y) {\n    if (typeof this.downwardAnimation === 'undefined') {\n      this.previousY = y;\n      this.downwardAnimation = 0.0001;\n      // handles the case in which multiple new spots are added\n    } else if (this.previousY < 0) {\n      this.previousY -= 1;\n    }\n  }\n  isMouseOver(cursorPos) {\n    const dx = cursorPos.x - this.canvasPos.cx;\n    const dy = cursorPos.y - this.canvasPos.cy;\n    return (dx * dx + dy * dy) <= (this.canvasPos.radius * this.canvasPos.radius);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Spot.js","export const COLORS = {\n  PURPLE: 'rgba(157, 90, 184, 1)',\n  GREEN: 'rgba(138, 237, 145, 1)',\n  BLUE: 'rgba(138, 189, 255, 1)',\n  RED: 'rgba(241, 92, 59, 1)',\n  YELLOW: 'rgba(231, 221, 0, 1)',\n};\n\nexport const COLORS_ARRAY = Object.values(COLORS);\n\nexport const DELTAS = {\n  top: { x: 0, y: 1 },\n  right: { x: 1, y: 0 },\n  bottom: { x: 0, y: -1 },\n  left: { x: -1, y: 0 },\n};\n\nexport const HIGH_SCORE = 'spots-high-score';\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/constants.js","import { COLORS_ARRAY } from './constants';\n\nexport const queryEl = selector => (document.querySelector(selector));\nexport const queryElAll = selector => (document.querySelectorAll(selector));\n\nexport const randomColor = () => {\n  const idx = Math.floor(Math.random() * 5);\n  return COLORS_ARRAY[idx];\n};\n\nexport const getOppositeDelta = (delta) => {\n  switch (delta) {\n    case 'top':\n      return 'bottom';\n    case 'right':\n      return 'left';\n    case 'bottom':\n      return 'top';\n    case 'left':\n      return 'right';\n    default:\n      throw new Error('delta not found in list of deltas');\n  }\n};\n\nexport const fixCanvasBlur = (canvas) => {\n  const context = canvas.getContext('2d');\n  const devicePixelRatio = window.devicePixelRatio || 1;\n  const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n                            context.mozBackingStorePixelRatio ||\n                            context.msBackingStorePixelRatio ||\n                            context.oBackingStorePixelRatio ||\n                            context.backingStorePixelRatio || 1;\n\n  const ratio = devicePixelRatio / backingStoreRatio;\n\n  if (devicePixelRatio !== backingStoreRatio) {\n    let oldWidth = canvas.width;\n    let oldHeight = canvas.height;\n\n    if (canvas.width > (window.innerWidth * 1.1)) {\n      const shrinkToFitScreenRatio = window.innerWidth / (canvas.width * 1.1);\n      oldWidth *= shrinkToFitScreenRatio;\n      oldHeight *= shrinkToFitScreenRatio;\n    }\n\n    canvas.width = oldWidth * ratio;\n    canvas.height = oldHeight * ratio;\n\n    canvas.style.width = `${oldWidth}px`;\n    canvas.style.height = `${oldHeight}px`;\n\n    context.scale(ratio, ratio);\n  }\n};\n\nexport const getCursorPos = (canvas, event) => {\n  event.preventDefault();\n  event.stopPropagation();\n\n  const x = event.clientX - canvas.offsetLeft;\n  const y = event.clientY - canvas.offsetTop;\n\n  return { x, y };\n};\n\nexport const getTouchPos = (canvas, event) => {\n  event.preventDefault();\n  event.stopPropagation();\n\n  const touch = event.touches[0] || event.changedTouches[0];\n  const x = touch.clientX - canvas.offsetLeft;\n  const y = touch.clientY - canvas.offsetTop;\n\n  return { x, y };\n};\n\nexport const getColorAtReducedOpacity = (color, opacity = 0.5) => {\n  const opacityIdx = color.length - 2;\n  return `${color.slice(0, opacityIdx)}${opacity})`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util.js","export default class Line {\n  constructor(startSpot) {\n    this.startSpot = startSpot;\n  }\n  destroyConnection() {\n    this.endSpot = undefined;\n  }\n  draw(ctx, cursorPos) {\n    ctx.strokeStyle = this.startSpot.color;\n    ctx.lineWidth = 12 * (ctx.canvas.width / 1200);\n    ctx.beginPath();\n    ctx.moveTo(this.startSpot.canvasPos.cx, this.startSpot.canvasPos.cy);\n    if (this.endSpot) {\n      ctx.lineTo(this.endSpot.canvasPos.cx, this.endSpot.canvasPos.cy);\n    } else {\n      ctx.lineTo(cursorPos.x, cursorPos.y);\n    }\n    ctx.stroke();\n  }\n  forgeConnection(endSpot) {\n    this.endSpot = endSpot;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Line.js"],"sourceRoot":""}